# Js异步解决方案-回调函数callback（二）

## 1. 简介

一个函数被作为参数传递给另一个函数

>回调并不一定就是异步，并没有直接关系，只不过回调函数是异步的一种解决方案

## 2. 案例

```js
function fn1(callback){
  console.log("1")
  callback && callback()
}

function fn2(){
  console.log("2")
}

fn1(fn2)

```

如上代码所示，函数fn1参数为一个回调，调用fn1时传进入了函数fn2，那么在函数fn1执行到callback函数调用时会调用fn2执行，这是一个典型的回调函数，不过是同步的，我们可以利用这点来解决异步，如下

```js
fn1(callback){
  setTimeout(() => {
    callback && callback()
  }, 1000)
}

fn1(()=>{
  console.log("1")
})
```

我们使用setTimeout在函数fn1中模拟了一个耗时1s的任务，耗时任务结束会抛出一个回调，那么我们在调用时就可以做到在函数fn1的耗时任务结束后执行回调函数了

采用这种方式，我们把同步操作变成了异步操作，fn1不会堵塞程序运行，相当于先执行程序的主要逻辑，将耗时的操作推迟执行

## 3. 回调函数优/缺

### 3.1 优点

回调函数是异步编程最基本的方法，其优点是简单、容易理解和部署

### 3.2 缺点

回调函数最大的缺点是不利于代码的阅读和维护，各个部分之间高度耦合(Coupling)

```js
fun1(() => {
  fun2(() => {
    fun3(() => {
      fun4(() => {
        fun5(() => {
          fun6()
        })
      })
    })
  })
})
```

上面这种代码在之前使用AJAX请求时很常见，因为业务上在一个请求结束后发起另一个请求的需求太多了，代码不优雅，不易阅读维护，高耦合，层层嵌套造成这种**回调地狱**

异步回调中，回调函数的执行栈与原函数分离开，外部无法抓住异常，异常会变得不可控

虽然缺点多，但回调函数日常开发中也不可或缺，使用时注意就好了

## 4. 参考文章

[「硬核JS」深入了解异步解决方案](https://juejin.cn/post/6844904064614924302#heading-65)

