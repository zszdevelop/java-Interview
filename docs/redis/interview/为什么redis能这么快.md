# 为什么redis能这么快?

## 1. 有多快

redis 支持10W+QPS(QPS 既query per second。每秒内查询的次数)

## 2. 为什么能这么快？

- 内存存储：纯内存操作，内存的读写速度非常快（不会受到硬盘IO限制）

- 数据结构简单：redis不使用表，数据不用预定义

  > redis不使用表，数据不用预定义。不强制用户与存储数据进行关联

- 单线程实现：redis使用单个线程处理请求，避免了多个线程之间线程切换和锁竞争

  >- 为什么是单线程：
  >  - Redis的瓶颈不是cpu的运行速度，而往往是网络带宽和机器的内存大小（官方文档）
  >  - 单线程切换开销小，容易实现
  >
  >- 如果万一CPU成为你redis的瓶颈，或者不想让其他核闲置怎么办？
  >  - 多起几个redis进程就好了。Redis是keyvalue数据库，又不是关系数据库，数据之间没有约束。只要客户端分清哪些key放在哪个Redis进程上就可以了。**redis-cluster**可以帮你做的更好。
  >- Redis Server运行的时候是单线程吗
  >  - **我们一直在强调的单线程，只是在处理我们的网络请求的时候只有一个线程来处理**
  >  - Redis进行持久化的时候会以子进程或者子线程的方式执行

- 非阻塞IO：Redis使用多路复用IO技术，在poll，epool，kqueue选择最优IO实现

  >等待用户的读写操作都是阻塞的，io操作往往不能直接返回，io多路复用就解决这个问题
  >
  >IO多路复用的具体实现select/epoll 等
  >
  >1. select/epoll在 单个process就可以同时处理多个网络连接的IO。
  >2. select/epoll这个function会不断的轮询所负责的所有socket，当某个socket有数据到达了，就通知用户进程