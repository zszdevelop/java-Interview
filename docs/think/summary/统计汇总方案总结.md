# 统计汇总方案总结

## 1 简介

统计方式

1. 实时统计
2. 新建汇总表
3. 添加进搜索引擎

## 2. 适用场景

### 2.1 实时统计

适合那些比较逻辑简单的统计查询。如单表查询或简单的连表查询

#### 2.1.1 示例

- 单表查询示例

  ```sql
  -- 统计用户数
  select count(*) userCount
  from sys_user;
  ```

- 简单的连表查询

  ```sql
  -- 统计部门下的用户数
  select d.dept_name,count(u.user_id) userCount
  from sys_dept d
  left join sys_user u on d.dept_id = u.dept_id
  group by d.dept_name
  ```

### 2.2 新建汇总表

汇总表适合逻辑相对复杂的查询。

- 数据来源可能**来源于多张表**
- 这些数据可能并不能直接使用，需要对其**进行一定的逻辑处理**，提前将数据分析后的结构添加到记录表
- 数据是**一对多的关系**，且还需要过滤多的这一方条件

#### 2.2.1 示例

不是特别好举例，比如说我们商城中需要统计使用优惠卷的人数，

### 2.3 添加进搜索引擎

- 适合那些对**性能要求比较高**的场景
- 需要模糊搜索、分词搜索的场景

