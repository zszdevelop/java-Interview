# 接口设计之依赖项过多时方案选择

## 1. 背景

在开发中有时候会面对一些复杂场景，例如

1. 表单项采集项特别多，有二三十个。
2. 针对表单我们还有额外操作，这些操作需要表单中的10个参数

## 2. 两种方案

### 2.1 方案1：把需要的参数传过来

传10个基础参数进来（我嫌太多，每个操作接口都要传）

### 2.2 方案2：每次操作前保存信息，只传表单id

方案2：每次操作前保存基础信息，多传一个表单id就可以（又觉得每次操作前保存是不是太浪费性能）

## 3. 最终方案

**我们程序在乎的是性能和用户体验。**

方案2每次保存的方案，需要额外浪费2次不必要的网络请求，

1. 前端先保存表单
2. 后端拿表单id查表单信息

这两步完全是没必要做的。

如果我们觉得写参数麻烦。我们**可以直接把表单对象整个传进去**，暴力一点也没事

## 4. 为什么会有这种问题产生？

温水煮青蛙的结果

1. 刚开始只需要表单id关联就好
2. 随后需要校验2个表单参数，ok再这几个操作中加2个新字段就好
3. 随着业务的发展，需要校验的数据越来越多。重复参数的增加导致多个操作方法都要加。索性改成通过表单id 后台查一遍

其实回过头来，如果一开始就有这样的需求，或许自己不会在这两种方案中纠结。

当遇到问题时，要看透本质